(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{103:function(e,a,t){},104:function(e,a,t){e.exports=t.p+"static/media/avatar.747f526f.svg"},105:function(e,a,t){},107:function(e,a,t){e.exports=t.p+"static/media/search.422d423f.svg"},124:function(e,a,t){e.exports=t.p+"static/media/chad-madden-8mCMQSq41gQ-unsplash.2c05fe38.jpg"},125:function(e,a,t){},126:function(e,a,t){},132:function(e,a,t){e.exports=t.p+"static/media/logo-blue.a150db00.svg"},136:function(e,a,t){e.exports=t.p+"static/media/search-blue.df215230.svg"},137:function(e,a,t){e.exports=t.p+"static/media/roya-ann-miller-G2QYE9czCEw-unsplash.c46cf8c9.jpg"},138:function(e,a,t){e.exports=t.p+"static/media/close.da67cfb9.svg"},139:function(e,a,t){e.exports=t.p+"static/media/settings.c5e2e3d7.svg"},140:function(e,a,t){e.exports=t.p+"static/media/logout.cb7690d4.svg"},141:function(e,a,t){e.exports=t.p+"static/media/mail.d8864552.svg"},142:function(e,a,t){e.exports=t.p+"static/media/world.7fc624ab.svg"},143:function(e,a,t){e.exports=t.p+"static/media/google-place.c9e3a731.svg"},144:function(e,a,t){e.exports=t.p+"static/media/phone.e3aed7d1.svg"},149:function(e,a,t){e.exports=t(205)},157:function(e,a,t){},174:function(e,a,t){},175:function(e,a,t){},194:function(e,a,t){},196:function(e,a,t){},197:function(e,a,t){},198:function(e,a,t){},200:function(e,a,t){},201:function(e,a){},202:function(e,a,t){e.exports=t.p+"static/media/colton-sturgeon-odKeTFsBDgE-unsplash.54b0f1ec.jpg"},203:function(e,a,t){},204:function(e,a,t){},205:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(32),o=t.n(l),c=t(16),s=t(6),i=(t(157),t(5)),u=t.n(i),m=t(7),p=t(14),d=t(37),g=t.n(d),E=t(106),f=t.n(E),v=t(11),h=(t(224),t(225),t(226),t(228),t(222)),b=(Object(h.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)},moreNested:{paddingLeft:e.spacing(6)}}})),t(43)),w=function(e,a,t){if("Closed"===t[0]||"Closed"===t[1])return!1;var n=Number(t[0].split(":")[0]),r=Number(t[0].split(":")[1]),l=Number(t[1].split(":")[0]),o=Number(t[1].split(":")[1]);if(e>n&&e<l)return!0;if(e===n){if(a>=r)return!0}else if(e===l&&a<=o)return!0;return!1},y=function(e){var a,t=new Date,n=t.getDay(),r=t.getHours(),l=t.getMinutes();switch(n){case 0:return a=[e.sun.open,e.sun.close],w(r,l,a);case 1:return a=[e.mon.open,e.mon.close],w(r,l,a);case 2:return a=[e.tue.open,e.tue.close],w(r,l,a);case 3:return a=[e.wed.open,e.wed.close],w(r,l,a);case 4:return a=[].concat(Object(b.a)(e.thu.open),[e.thu.close]),w(r,l,a);case 5:return a=[e.fri.open,e.fri.close],w(r,l,a);case 6:return a=[e.sat.open,e.sat.close],w(r,l,a);default:return null}},N=function(e){var a=e.place,t=Object(n.useState)(!1),l=Object(v.a)(t,2),o=(l[0],l[1],Object(n.useState)(!1)),c=Object(v.a)(o,2),s=(c[0],c[1],a.prices&&a.prices,a.openingHours?a.openingHours:null);y(s);return r.a.createElement("li",{className:"place-wrapper"},r.a.createElement("div",{className:"place-card"},r.a.createElement("a",{href:"/gym/".concat(a.name," ")},r.a.createElement("img",{src:a.image,alt:"".concat(a.name," sali"),className:"place"})),r.a.createElement("div",{className:"place-text-wrapper"},r.a.createElement("h2",{className:"place-header"},a.name),r.a.createElement("blockquote",{className:"place-description"},a.description),r.a.createElement("button",{className:"readmore-button"},r.a.createElement("a",{href:"/gym/".concat(a.name," ")}," Read more")))))},O=function(e){var a=e.search,t=Object(s.c)((function(e){return e.places})).sort((function(e){return e.name})),n=""===a?t:t.filter((function(e){return e.name.toUpperCase().startsWith(a.toUpperCase())}));return r.a.createElement("ul",{className:"place-list"},n.map((function(e){return r.a.createElement(N,{key:e.id,place:e})})))},C=(t(174),t(132)),H=t.n(C),j=(t(175),t(86)),k=t.n(j),x=t(3),S=t(12),P=t.n(S),F=function(){var e=Object(m.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post("".concat("/api","/contact"),a,{withCredentials:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),q=function(){var e=Object(m.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post("".concat("/api","/forgot"),a,{withCredentials:!0});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post("".concat("/api","/passwordReset"),a,{withCredentials:!0});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),A=t(4),D=t(58),I=t(227),U=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return function(n){n({type:"NOTIFICATION",notification:{title:e.title,message:e.message,type:a,time:t,id:Object(I.a)()}})}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"NOTIFICATION":return[].concat(Object(b.a)(e),[Object(D.a)({},a.notification)]);case"CLEAR_NOTIFICATION":return console.log({action:a}),e.filter((function(e){return e.id!==a.id}));default:return e}},_=function(){var e=Object(s.b)(),a=function(){var a=Object(m.a)(u.a.mark((function a(t){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,F(t);case 3:a.sent,e(U({title:"Done",message:"Thank you for contacting us. Your email has been sent"})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),e(U({title:"Error",message:"Oh no an error has occured ".concat(a.t0.response.data.error)},"error"));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}(),t=A.d({name:A.f().required("Name is required."),email:A.f().email("Must be a valid email").required("Required"),message:A.f().required().min(10,"Message should be atleast 10 characters long.")});return r.a.createElement(x.d,{validateOnChange:!0,validationSchema:t,initialValues:{name:"",email:"",message:""},onSubmit:function(e,t){var n=t.setSubmitting,r=t.resetForm;n(!0),a(e),n(!1),r()}},(function(e){var a=e.values,t=e.errors,n=e.isSubmitting;return r.a.createElement(x.c,{className:"footer-form"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"name",value:a.name,type:"input"})),t.name?r.a.createElement("div",{className:"form-error-message"},t.name):null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"email",value:a.email,type:"input"})),t.email?r.a.createElement("div",{className:"form-error-message"},t.email):null,r.a.createElement("label",{htmlFor:"name"},"Message"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{component:"textarea",name:"message",value:a.message,placeholder:"message...",multiline:"true",rows:3})),t.message?r.a.createElement("div",{className:"form-error-message"},t.message):null,r.a.createElement("button",{disabled:n,type:"submit",className:"contact-submit"},"Send"))}))},M=function(){return r.a.createElement("section",{className:"footer"},r.a.createElement("div",{className:"footer-bg"},r.a.createElement("div",{className:"wrapper "},r.a.createElement("div",{className:"footer-upper-wrapper"},r.a.createElement("div",{className:"footer-headers"},r.a.createElement("h2",null,"Are there any other places?"),r.a.createElement("h2",null,"Let us know!")),r.a.createElement("div",{className:"footer-form-wrapper"},r.a.createElement(_,null))))),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"footer-lower-wrapper"},r.a.createElement("img",{src:k.a,alt:"footer logo",className:"footer-logo"}),r.a.createElement("ul",{className:"footer-list"},r.a.createElement("li",null,"Terms"),r.a.createElement("li",null,"Privacy"),r.a.createElement("li",null,"Our mission"),r.a.createElement("li",null,"Work with us"),r.a.createElement("li",null,"Help")))))},L=t(136),V=t.n(L),G={login:function(){var e=Object(m.a)(u.a.mark((function e(a){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={type:"onSite",user:Object(D.a)({},a)},e.next=3,P.a.post("/api/login",t,{withCredentials:!0});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),googleLogin:function(){var e=Object(m.a)(u.a.mark((function e(a){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({user_token:a}),t={headers:{Authorization:"Bearer ".concat(a)},withCredentials:!0},e.next=4,P.a.post("/api/login",{type:"google"},t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.get("".concat("/api/login","/check"),{withCredentials:!0});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error on getUser",{err:e.t0});case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),logoutUser:function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("".concat("/api/login","/logout"),{withCredentials:!0});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},J={signInFlow:"popup",signInSuccessUrl:"http://localhost:3000/",signinOptions:[g.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:!1}},W=function(e){return console.log({user_token:e}),function(){var a=Object(m.a)(u.a.mark((function a(t){var n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,G.googleLogin(e);case 3:n=a.sent,t({type:"LOGIN",data:n}),t(U({title:"Done",message:"Successfully logged in!"})),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),t(U({title:"Error",message:"Login failed ".concat(a.t0.response.data.error)},"error")),console.error("Error on google login: ",a.t0.message);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},Y=function(){return function(){var e=Object(m.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.getUser();case 3:t=e.sent,console.log({check:t}),t?a({type:"GET_USER",data:t}):(window.localStorage.clear(),g.a.auth().signOut()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log({err:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()},z=function(){return function(){var e=Object(m.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.logoutUser();case 3:e.sent,a({type:"LOGOUT"}),a(U({title:"Done",message:"You have logged out!"})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(U({title:"Error",message:"Logout failed ".concat(e.t0.response.data.error)},"error"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{session:!0},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN":return window.localStorage.setItem("login",JSON.stringify(a.data)),a.data;case"LOGOUT":return window.localStorage.clear(),g.a.auth().signOut(),window.location.reload(!0),{session:!0};case"GET_USER":return console.log("action data",a.data),window.localStorage.setItem("login",JSON.stringify(a.data)),a.data;default:return e}},K=(t(194),t(137)),Q=t.n(K),X=function(e){var a=Object(s.b)(),t=(Object(p.f)(),Object(s.c)((function(e){return e.session})),function(e){a(function(e){return function(){var a=Object(m.a)(u.a.mark((function a(t){var n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,G.login(e);case 3:n=a.sent,t({type:"LOGIN",data:n}),t(U({title:"Done",message:"Successfully logged in!"})),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),t(U({title:"Error",message:"Login failed ".concat(a.t0.response.data.error)},"error")),console.error("Error on login: ",{err:a.t0});case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(e))}),n=A.d({username:A.f().required("Required"),password:A.f().required("Password required")});return r.a.createElement(x.d,{validateOnChange:!0,validationSchema:n,initialValues:{username:"",password:""},onSubmit:function(e,a){var n=a.setSubmitting,r=a.resetForm;n(!0),t(e),n(!1),r()}},(function(e){var a=e.values,t=e.errors,n=e.isSubmitting;return r.a.createElement(x.c,null,r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"username",value:a.username,type:"input"})),t.username?r.a.createElement("div",{className:"form-error-message"},t.username):null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"password",value:a.password,type:"password"})),t.password?r.a.createElement("div",{className:"form-error-message"},t.password):null,r.a.createElement("button",{disabled:n,type:"submit",className:"submit"},"Log in"))}))},Z=t(138),$=t.n(Z),ee=function(e){var a=e.close,t=(Object(s.b)(),Object(p.f)());return r.a.createElement("section",null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-image"},r.a.createElement("img",{src:Q.a,alt:""})),r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"login-header"},r.a.createElement("h2",null,"Log in"),r.a.createElement("img",{src:$.a,alt:"",onClick:a})),r.a.createElement(X,null),r.a.createElement(f.a,{uiConfig:J,firebaseAuth:g.a.auth()}),r.a.createElement("p",{className:"login-small",onClick:function(){return t.push("/forgot")},style:{cursor:"pointer"}},"Forgot password?"),r.a.createElement("p",{className:"login-small",onClick:function(){return t.push("/register")},style:{cursor:"pointer"}},"Don't have an account?")))))},ae=(t(196),function(e){var a=e.open,t=e.children,n=e.onClose,l=Object(s.c)((function(e){return e.session}));return a&&l&&l.session?o.a.createPortal(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-bg",onClick:n}),r.a.createElement("div",{className:"modal"},t)),document.getElementById("portal")):null}),te=(t(103),t(104),t(139)),ne=t.n(te),re=t(140),le=t.n(re),oe=function(e){var a=e.user,t=Object(s.b)(),n=Object(p.f)();return r.a.createElement("div",{className:"dropdown"},r.a.createElement(c.b,{to:{pathname:"/".concat(a.username,"/settings"),user:a}},r.a.createElement("img",{src:ne.a,className:"little-nav-icon",alt:"user"})," Settings"),r.a.createElement(c.b,{to:{pathname:"/#"},onClick:function(e){e.preventDefault(),t(z()),n.push("/")}},r.a.createElement("img",{src:le.a,className:"little-nav-icon",alt:"user"})," Logout"))},ce=t(41),se=function(e){var a=e.modal,t=e.user,l=e.page,o=Object(n.useState)(!1),c=Object(v.a)(o,2),s=c[0],i=c[1],u=(Object(ce.b)({opacity:1,marginTop:0,from:{opacity:0,marginTop:-500}}),Object(ce.b)({cursor:"pointer",opacity:1,from:{opacity:0},config:{delay:1e3,duration:1e3}}));if(!t)return null;console.log({user:t}),console.log({user:t});return r.a.createElement("nav",null,r.a.createElement("ul",null,t.session?r.a.createElement(ce.a.li,{style:u,onClick:a},"Log in"):r.a.createElement("li",null,r.a.createElement(ce.a.img,{style:u,onError:function(e){e.target.src="".concat(t.avatar)},src:"main"===l?t.avatar:"../".concat(t.avatar),className:"nav-icon",alt:"user",onClick:function(){return i(!s)}}),s&&r.a.createElement(oe,{user:t}))))},ie=t(87),ue=t.n(ie),me=t(107),pe=t.n(me),de=(t(197),function(e){var a=e.page,t=void 0===a?"secondary":a,l=Object(s.b)(),o=Object(ce.b)({opacity:1,marginTop:0,from:{opacity:0,marginTop:-500}}),c=Object(ce.b)({cursor:"pointer",opacity:1,from:{opacity:0},config:{delay:1e3,duration:1e3}}),i=Object(n.useState)(!1),u=Object(v.a)(i,2),m=u[0],d=u[1],g=Object(p.f)(),E=Object(s.c)((function(e){return e.session}));return Object(n.useEffect)((function(){l(Y())}),[]),E?(console.log({isOpen:m}),console.log({user:E}),r.a.createElement("div",null,r.a.createElement(ce.a.section,{style:o,className:"nav-header ".concat(t)},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("div",{className:"search"},"main"===t?null:r.a.createElement(ce.a.img,{style:c,src:ue.a,alt:"",className:"header-logo",onClick:function(){return g.push("/")}}),r.a.createElement("img",{src:pe.a,className:"search-icon",alt:"search-icon"}),r.a.createElement("input",{type:"text",className:"search-bar",placeholder:"Search..."})),r.a.createElement(se,{modal:function(e){e.preventDefault(),d(!0)},user:E,page:t})))),r.a.createElement(ae,{open:m,onClose:function(){return d(!1)}},r.a.createElement(ee,{close:function(){return d(!1)}})))):null}),ge=function(e){var a=Object(s.b)(),t=Object(n.useState)(!1),l=Object(v.a)(t,2),o=(l[0],l[1],Object(n.useState)(!1)),c=Object(v.a)(o,2),i=c[0],u=c[1],m=(Object(s.c)((function(e){return e.session})),Object(n.useState)("")),p=Object(v.a)(m,2),d=p[0],g=p[1];Object(n.useEffect)((function(){e.location.open&&u(e.location.open),a(Y())}),[]);return r.a.createElement("div",null,r.a.createElement("section",{className:"hero-home"},r.a.createElement("div",{className:"wrappers"},r.a.createElement(de,{page:"main"}),r.a.createElement("div",{className:"hero-content-home"},r.a.createElement("img",{src:H.a,alt:"Top logo",className:"top-logo"}),r.a.createElement("p",{className:"subtitle"},"Find the best climbing gym for you")))),r.a.createElement(ae,{open:i,onClose:function(){return u(!1)}},r.a.createElement(ee,{close:function(){return u(!1)}})),r.a.createElement("section",{className:"place-window-wrapper"},r.a.createElement("div",{className:"wrapper "},r.a.createElement("div",{className:"search-container-main"},r.a.createElement("img",{src:V.a,alt:"",className:"search-icon-main"}),r.a.createElement("input",{type:"text",className:"search-bar-main",onChange:function(e){return g(e.target.value)},placeholder:"Search..."})),r.a.createElement(O,{search:d}))),r.a.createElement(M,null))},Ee={getAll:function(){return P.a.get("/api/comments",{withCredentials:!0}).then((function(e){return e.data}))},getComments:function(){var e=Object(m.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log({place_name:a}),void 0===a){e.next=6;break}return e.next=4,P.a.get("".concat("/api/comments","/").concat(a),{withCredentials:!0});case 4:return t=e.sent,e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(m.a)(u.a.mark((function e(a,t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(D.a)(Object(D.a)({},a),{},{id:t}),e.next=3,P.a.post("/api/comments",n,{withCredentials:!0});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),deleteObject:function(e){return P.a.delete("".concat("/api/comments","/").concat(e),{withCredentials:!0}).then((function(e){return e.data}))}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_COMMENT":return e.concat(a.data);case"DELETE":return e.filter((function(e){return e.id!==a.data.id}));case"INIT_COMMENTS":case"GET_COMMENTS":return a.data;default:return e}},ve=(t(124),t(105),function(e){var a=e.place_id,t=Object(s.b)(),n=Object(s.c)((function(e){return e.session})),l=function(e){t(function(e,a){return function(){var t=Object(m.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.addComment(e,a);case 3:r=t.sent,n({type:"ADD_COMMENT",data:r}),n(U({title:"Done",message:"You commented! Nice!"})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),n(U({title:"Error",message:"Sorry server didn't like that comment. Try again."},"error")),console.error("Error on addComment dispatch: ",t.t0.response.data.error);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e,a))},o=A.d({comment:A.f().min(2,"Message should be atleast 2 characters long.").required("Required")});return r.a.createElement("section",{className:"cmform-wrapper"},r.a.createElement("div",{className:"wrapper"},n.session?r.a.createElement("h3",{className:"placeholder"},"You must be logged in to comment!"):r.a.createElement("div",{className:"cmbox-wrapper"},r.a.createElement("img",{onError:function(e){e.target.src="".concat(n.avatar)},src:"../".concat(n.avatar),alt:"profile"}),r.a.createElement(x.d,{initialValues:{comment:""},validateOnChange:!0,validationSchema:o,onSubmit:function(e,a){var t=a.setSubmitting,n=a.resetForm;t(!0),l(e),t(!1),n()}},(function(e){e.values,e.handleChange,e.handleBlur;var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a,className:"cmform"},r.a.createElement(x.a,{component:"textarea",name:"comment",type:"input",placeholder:"your comment",multiline:"true",rows:1}),r.a.createElement("button",{type:"submit",className:"submit cmbox-button"}," Comment"))})))))}),he=function(e){var a=e.comment,t=a.user,n=new Date(a.date),l="".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear());return a?r.a.createElement("li",{className:"card"},r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"comment-meta"},r.a.createElement("img",{onError:function(e){e.target.src="".concat(t.avatar)},src:"../".concat(t.avatar),alt:"",className:"comment-avatar"})),r.a.createElement("div",{className:"comment-meta-meta"},r.a.createElement("strong",null," ",t.name),r.a.createElement("p",{className:"timestamp"},l)),r.a.createElement("div",{className:"comment-body"},r.a.createElement("blockquote",null,a.comment)))):null},be=function(e){var a=e.header,t=Object(s.c)((function(e){return e.comments}));return r.a.createElement("section",{className:"comments-wrapper"},r.a.createElement("div",{className:"wrapper align"},r.a.createElement("h2",null,a),t.length<1?r.a.createElement("h3",null,"Be the first one to comment!"):r.a.createElement("ul",{className:"comment-list-wrapper"},t.map((function(e){return r.a.createElement(he,{key:e.id,comment:e})})))))},we=t(141),ye=t.n(we),Ne=t(142),Oe=t.n(Ne),Ce=t(143),He=t.n(Ce),je=t(144),ke=t.n(je),xe=(t(198),function(e){var a=e.price,t=e.name;return r.a.createElement("li",null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"upper-category"},r.a.createElement("h2",null,t),r.a.createElement("div",{className:"text-wrapper"},r.a.createElement("div",{className:"text"},r.a.createElement("strong",null,a.onetime,"\u20ac",r.a.createElement("br",null),"/kerta")))),r.a.createElement("div",{className:"lower-category"},r.a.createElement("p",null,a.tentime,"\u20ac",r.a.createElement("br",null),"/10x-kertaa"),r.a.createElement("p",null,a.month,"\u20ac",r.a.createElement("br",null),"/kuukausi"))))}),Se=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.places})),t=["first","second","third","fourth","fifth","sixth","seventh","eight","nineth","tenth"],l=Object(p.g)("/gym/:place_name"),o=l?a.find((function(e){return e.name===l.params.place_name})):null;if(Object(n.useEffect)((function(){var a,t;console.log({match:l}),void 0!==(null===l||void 0===l||null===(a=l.params)||void 0===a?void 0:a.place_name)&&e((t=l.params.place_name,function(){var e=Object(m.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.getComments(t);case 3:n=e.sent,a({type:"GET_COMMENTS",data:n}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a(U({title:"Error",message:"There was an error loading the database. Please try again later."},"error")),console.error("Error on initialize comments: ",e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()))}),[o]),!o)return null;var c=o.image.replace(/\\/g,"/");return console.log({image:c,match:l,places:a}),r.a.createElement("div",null,r.a.createElement(de,null),r.a.createElement("section",{className:"hero-wrapper",style:{background:"url('../".concat(c,"')"),backgroundSize:"cover",backgroundPosition:"50% 45%",borderRadius:"0 0 10px 10px"}}),r.a.createElement("section",{className:"info-sec"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"hero-content-place"},r.a.createElement("h1",null,o.name),r.a.createElement("p",{className:"subtitle-place"},o.description)))),r.a.createElement("section",{className:"content-wrapper"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"content-grid"},r.a.createElement("div",{className:"card opening-wrapper margin-left"},r.a.createElement("h2",null,"Aukioloajat"),r.a.createElement("ul",{className:"opening-list"},r.a.createElement("li",{className:"open"},r.a.createElement("strong",null,"Mon"),r.a.createElement("p",null,o.openingHours.mon.open," - ",o.openingHours.mon.close)),r.a.createElement("li",{className:"open"},r.a.createElement("strong",null,"Tue"),r.a.createElement("p",null,o.openingHours.tue.open," - ",o.openingHours.tue.close)),r.a.createElement("li",{className:"open"},r.a.createElement("strong",null,"Wed"),r.a.createElement("p",null,o.openingHours.wed.open," - ",o.openingHours.wed.close)),r.a.createElement("li",{className:"open"},r.a.createElement("strong",null,"Thu"),r.a.createElement("p",null,o.openingHours.thu.open," - ",o.openingHours.thu.close)),r.a.createElement("li",{className:"open"},r.a.createElement("strong",null,"Fri"),r.a.createElement("p",null,o.openingHours.fri.open," - ",o.openingHours.fri.close)),r.a.createElement("li",{className:"open"},r.a.createElement("strong",null,"Sat"),r.a.createElement("p",null,o.openingHours.sat.open," - ",o.openingHours.sat.close)),r.a.createElement("li",{className:"open"},r.a.createElement("strong",null,"Sun"),r.a.createElement("p",null,o.openingHours.sun.open," - ",o.openingHours.sun.close)))),r.a.createElement("div",{className:"card margin-right"},r.a.createElement("h2",null,"Info"),r.a.createElement("ul",{className:"info-list"},r.a.createElement("li",null,r.a.createElement("img",{src:ye.a,alt:""}),r.a.createElement("p",{className:"place-info"},o.email)),r.a.createElement("li",null,r.a.createElement("img",{src:Oe.a,alt:""}),r.a.createElement("a",{href:o.url,className:"place-info"},o.url)),r.a.createElement("li",null,r.a.createElement("img",{src:He.a,alt:""}),r.a.createElement("p",{className:"place-info"},o.address)),r.a.createElement("li",null,r.a.createElement("img",{src:ke.a,alt:""}),r.a.createElement("p",{className:"place-info"},o.phone)))),r.a.createElement("div",{className:"card margin-left"},r.a.createElement("h2",null,"Tags"),r.a.createElement("ul",{className:"likes-user"},o.tags.map((function(e,a){return r.a.createElement("li",{key:a,className:"tag-item ".concat(t[Math.floor(Math.random()*t.length)])},r.a.createElement("p",null,e))}))))))),r.a.createElement("section",{className:"prices"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("h1",null,"Hinnasto"),r.a.createElement("blockquote",null,r.a.createElement("strong",null,"HUOM!")," Hinnat ovat suuntaa antavia. Hinnat eiv\xe4t v\xe4ltt\xe4m\xe4tt\xe4 pid\xe4 paikkaansa jos sivuja ei ole ehditty p\xe4ivitt\xe4m\xe4\xe4n. Hinnat eiv\xe4t my\xf6sk\xe4\xe4n sis\xe4ll\xe4 tarvike vuokria."),r.a.createElement("div",{className:"price-wrapper"},r.a.createElement("ul",{className:"price-list"},o.prices.map((function(e){return r.a.createElement(xe,{key:e.name,price:e,name:e.name})})))))),r.a.createElement(be,{header:"Kommentit",place_id:o.id}),r.a.createElement(ve,{place_id:o.id}),r.a.createElement(M,null))},Pe={getAll:function(){return P.a.get("/api/places").then((function(e){return e.data}))},add:function(){var e=Object(m.a)(u.a.mark((function e(a){var t,n,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("add placeService tapahtuu"),console.log({data:a}),t=a.file,delete a.file,n=JSON.stringify(a),(r=new FormData).append("imageName",Date.now()),r.append("imageData",t),r.append("place",n),console.log({formData:r}),e.next=12,P.a.post("/api/places",r,{withCredentials:!0});case 12:return l=e.sent,e.abrupt("return",l.data);case 14:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),update:function(e,a){console.log("update placeService tapahtuu"),console.log({id:e},{data:a});var t=a.file;delete a.file;var n=JSON.stringify(a);console.log({id:e,data:a,placeData:n});var r=new FormData;return r.append("imageName",Date.now()),r.append("imageData",t),r.append("place",n),P.a.put("".concat("/api/places","/").concat(e),r,{withCredentials:!0}).then((function(e){return e.data}))},deleteObject:function(e){return P.a.delete("".concat("/api/places","/").concat(e),{withCredentials:!0}).then((function(e){return e.data}))}},Fe=function(e){return function(){var a=Object(m.a)(u.a.mark((function a(t){var n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Pe.add(e);case 3:n=a.sent,t({type:"NEW_PLACE",data:n}),t(U({title:"Done",message:"New place created!"})),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),t(U({title:"Error",message:"Couldn't create a place: ".concat(a.t0.response.data.error)},"error")),console.error("Error on createPlace: ",a.t0.response.data.error);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},qe=function(e,a){return console.log("Update place tapahtuu"),function(){var t=Object(m.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pe.update(e,a);case 3:r=t.sent,n({type:"UPDATE_PLACE",data:r}),n(U({title:"Done",message:"Place info updated!"})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),n(U({title:"Error",message:"Couldn't update a place: ".concat(t.t0.response.data.error)},"error")),console.error("Error on updatePlace: ",t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"NEW_PLACE":return e.concat(a.data);case"UPDATE_PLACE":var t=a.data.id;return e.map((function(e){return e.id!==t?e:a.data}));case"INIT_PLACES":return a.data;default:return e}},Ae={getAll:function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/api/users");case 2:return a=e.sent,e.abrupt("return",a.then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),uploadAvatar:function(){var e=Object(m.a)(u.a.mark((function e(a){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("imageName",Date.now()),t.append("imageData",a),e.next=5,P.a.put("".concat("/api/users","/update/uploadImage"),t,{withCredentials:!0});case 5:return n=e.sent,console.log({response:n}),e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateUserInfo:function(){var e=Object(m.a)(u.a.mark((function e(a,t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("userService update user",{username:a},{data:t}),e.next=3,P.a.put("".concat("/api/users","/").concat(a),t,{withCredentials:!0});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),changePassword:function(){var e=Object(m.a)(u.a.mark((function e(a,t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.put("".concat("/api/users","/changePassword/").concat(a),t,{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),createUser:function(){var e=Object(m.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post("/api/users",a);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),deleteUser:function(){var e=Object(m.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({username:a}),e.next=3,P.a.delete("".concat("/api/users","/").concat(a),{withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},De=function(e){return function(){var a=Object(m.a)(u.a.mark((function a(t){var n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ae.uploadAvatar(e);case 3:n=a.sent,console.log({imageSave:n}),t({type:"UPDATE_USER",data:n}),t(Y()),t(U({title:"Done",message:"Profile picture updated. If you can't see a change reload the page!"})),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),t(U({title:"Error",message:"Sorry, couldn't update your profile picture."},"error"));case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},Ie=function(e,a){return function(){var t=Object(m.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ae.updateUserInfo(e,a);case 3:r=t.sent,console.log({newUserInfo:r}),n({type:"UPDATE_USER",data:r}),n(Y()),n(U({title:"Done",message:"Your information has been updated."})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n(U({title:"Error",message:"Sorry, couldn't update your information."},"error"));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_USER":return console.log("tapathuu UPDATE_USER"),window.localStorage.setItem("login",JSON.stringify(a.data)),e;case"CREATE_USER":case"CHANGE_PASSWORD":case"DELETE_USER":default:return e}},Re=t(8),_e=t.n(Re),Me=(t(115),t(199),_e.a.initializeApp({apiKey:"AIzaSyCVmpjoCpS53LqU26ee693vwbKwIp3-0Mg",authDomain:"climbingfinland-cf142.firebaseapp.com",databaseURL:"https://climbingfinland-cf142.firebaseio.com",projectId:"climbingfinland-cf142",storageBucket:"climbingfinland-cf142.appspot.com",messagingSenderId:"513581301963",appId:"1:513581301963:web:e50aa3799f9ae5bc4c1b4e",measurementId:"G-H8QRV1L13W"})),Le=Me.auth(),Ve=(_e.a.storage(),t(200),function(e){var a=e.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"name"},"Name*"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"name",type:"input"})),a.name?r.a.createElement("div",{className:"form-error-message"},a.name):null,r.a.createElement("label",{htmlFor:"email"},"Email*"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"email",type:"input"})),a.email?r.a.createElement("div",{className:"form-error-message"},a.email):null,r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"city",type:"input"})),a.city?r.a.createElement("div",{className:"form-error-message"},a.city):null)}),Ge=function(e){var a=e.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"username"},"Username*"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"username",type:"input"})),a.username?r.a.createElement("div",{className:"form-error-message"},a.username):null,r.a.createElement("label",{htmlFor:"password"},"Password*"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"password",type:"password"})),a.password?r.a.createElement("div",{className:"form-error-message"},a.password):null,r.a.createElement("label",{htmlFor:"passwordagain"},"Confirm Password*"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"passwordagain",type:"password"})),a.passwordagain?r.a.createElement("div",{className:"form-error-message"},a.passwordagain):null,r.a.createElement("label",{htmlFor:"adminVerification"},"Admin verification"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"adminVerification",type:"password"})),a.adminVerification?r.a.createElement("div",{className:"form-error-message"},a.adminVerification):null)},Je=function(){var e=Object(s.b)(),a=Object(p.f)(),t=Object(n.useState)(0),l=Object(v.a)(t,2),o=l[0],i=l[1],d="wrapper".concat(o+1),g=function(a){try{e(function(e){return function(){var a=Object(m.a)(u.a.mark((function a(t){var n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ae.createUser(e);case 3:n=a.sent,t({type:"CREATE_USER",data:n}),t(U({title:"Done",message:"Registeration successful. Please go confirm you'r email address before trying to log in."})),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error on create user",{err:a.t0}),t(U({title:"Error",message:"Sorry, couldn't create a new account. Try again later."},"error"));case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(a))}catch(t){console.log("Error on register submit",t.error)}},E=A.d({name:A.f().required("Name is required."),username:A.f().required("Username required").min(6,"Minimum length is 6 characters"),email:A.f().email("Must be a valid email").required("Email required"),password:A.f().required("Password required").min(10,"Password must be atleast 10 characters long"),passwordagain:A.f().required("Password required").oneOf([A.e("password")],"Passwords must match"),city:A.f().required("Where do you live?")});return r.a.createElement("div",{className:"".concat(d," register-wrapper")},r.a.createElement("h2",null,"Register"),r.a.createElement(x.d,{validateOnChange:!0,validationSchema:E,initialValues:{username:"",password:"",passwordagain:"",name:"",email:"",city:"",adminVerification:""},onSubmit:function(e,t){var n=t.setSubmitting;t.resetForm;n(!0),g(e),n(!1),a.push("/")}},(function(e){e.values;var a=e.errors,t=e.isSubmitting;return r.a.createElement(x.c,null,0===o?r.a.createElement(Ge,{errors:a}):r.a.createElement(Ve,{errors:a}),1!==o?null:r.a.createElement("button",{disabled:t,type:"submit",className:"submit"},"Register"))})),0===o?null:r.a.createElement("button",{onClick:function(){return i(o-1)},className:"submit"}," Back "),0!==o?null:r.a.createElement("button",{onClick:function(){return i(o+1)},className:"submit"}," Next "),r.a.createElement("p",{className:"login-small",style:{cursor:"pointer"}},r.a.createElement(c.b,{to:{pathname:"/",open:!0}}," Already have an account?")))},We=function(){Object(p.f)();return r.a.createElement("div",null,r.a.createElement(de,null),r.a.createElement("section",{className:"wrapper"},r.a.createElement(Je,null)),r.a.createElement(M,null))},Ye=(t(125),function(){var e=Object(p.f)(),a=Object(s.b)(),t=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t);case 3:e.sent,a(U({title:"Done",message:"Your password has been reset."})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(U({title:"Error",message:"Oh no there was an error while reseting your password ".concat(e.t0.response.data.error)},"error"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),n=A.d({newPassword:A.f().required("Password required").min(10,"Password must be atleast 10 characters long"),newPasswordAgain:A.f().required("Password required").oneOf([A.e("newPassword")],"Passwords must be the same")});return r.a.createElement(x.d,{initialValues:{newPassword:"",newPasswordAgain:""},validateOnChange:!0,validationSchema:n,onSubmit:function(a,n){var r=n.setSubmitting,l=n.resetForm;r(!0),t(a),r(!1),l(),e.push("/")}},(function(e){var a=e.values,t=e.errors,n=e.isSubmitting;return r.a.createElement(x.c,null,r.a.createElement("label",{htmlFor:"newPassword"},"New password"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"newPassword",value:a.newPassword,type:"password"})),t.newPassword?r.a.createElement("div",{className:"form-error-message"},t.newPassword):null,r.a.createElement("label",{htmlFor:"newPasswordAgain"},"New password again"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{type:"password",name:"newPasswordAgain",value:a.newPasswordAgain})),t.newPasswordAgain?r.a.createElement("div",{className:"form-error-message"},t.newPasswordAgain):null,r.a.createElement("button",{disabled:n,type:"submit",className:"submit"},"Reset password"))}))}),ze=function(){return r.a.createElement("div",null,r.a.createElement(de,null),r.a.createElement("section",{className:"wrapper"},r.a.createElement("div",{className:"reset-wrapper"},r.a.createElement("h2",null,"Reset your password"),r.a.createElement("p",{className:"login-small"},"Enter your new password and press the 'reset password' button to reset your password"),r.a.createElement(Ye,null),r.a.createElement("div",{className:"reset-footer"}))),r.a.createElement(M,null))},Be=function(){var e=Object(s.b)(),a=function(){var a=Object(m.a)(u.a.mark((function a(t){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,q(t);case 3:a.sent,e(U({title:"Done",message:"A reset link has been sent to your email."})),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),e(U({title:"Error",message:"Oh no something went wrong: ".concat(a.t0.response.data.error)},"error"));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}(),t=A.d({email:A.f().email("Must be a valid email").required("Required")});return r.a.createElement(x.d,{validateOnChange:!0,validationSchema:t,initialValues:{email:""},onSubmit:function(e,t){var n=t.setSubmitting,r=t.resetForm;n(!0),a(e),n(!1),r()}},(function(e){var a=e.values,t=e.errors,n=e.isSubmitting;return r.a.createElement(x.c,null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"email",value:a.email,type:"input"})),t.email?r.a.createElement("div",{className:"form-error-message"},t.email):null,r.a.createElement("button",{disabled:n,type:"submit",className:"submit"},"Send"))}))},Ke=function(){return r.a.createElement("div",null,r.a.createElement(de,null),r.a.createElement("section",{className:"wrapper"},r.a.createElement("div",{className:"reset-wrapper"},r.a.createElement("h2",null,"Forgot your password?"),r.a.createElement("p",{className:"login-small"},"Enter your email address to reset your password. If you can't see the messages check your spam folder"),r.a.createElement(Be,null))),r.a.createElement(M,null))},Qe=(t(201),t(202),t(203),function(e){var a=e.user,t=(Object(p.f)(),Object(s.b)()),n=(Object(p.g)("/:username/settings"),function(){var e=Object(m.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&t(Ie(a.username,n));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),l=A.d({name:A.f().required("Name is required."),username:A.f().required("Username required").min(6,"Minimum length is 6 characters"),email:A.f().email("Must be a valid email").required("Email required"),city:A.f().required("Where do you live?")});return r.a.createElement("div",{className:"account-settings wrap "},r.a.createElement("div",{className:"align"},r.a.createElement("h2",null,"Account"),r.a.createElement(x.d,{validateOnChange:!0,validationSchema:l,initialValues:a,enableReinitialize:!0,onSubmit:function(e,a){var t=a.setSubmitting,r=a.resetForm;t(!0),n(e),t(!1),r()}},(function(e){var a=e.errors,t=e.values,n=e.isSubmitting,l=e.handleChange;return r.a.createElement(x.c,{action:"",className:"account-settings-form form"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"name",value:t.name,type:"input",onChange:l})),a.name?r.a.createElement("div",{className:"form-error-message"},a.name):null,"ThirdPartyUser"===t.type?null:r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"email",value:t.email,type:"email",onChange:l})),a.email?r.a.createElement("div",{className:"form-error-message"},a.email):null),r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"city",value:t.city,type:"input",onChange:l})),a.city?r.a.createElement("div",{className:"form-error-message"},a.city):null,r.a.createElement("button",{disabled:n,type:"submit",className:"submit"},"Save"),r.a.createElement("pre",{style:{color:"blue"}},JSON.stringify(t,null,2)),r.a.createElement("pre",{style:{color:"blue"}},JSON.stringify(a,null,2)))}))))}),Xe=function(e){var a=e.user,t=Object(p.f)(),n=Object(s.b)(),l=(Object(p.g)("/:username/settings"),function(e){a&&(n(function(e,a){return function(){var t=Object(m.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ae.changePassword(e,a);case 3:r=t.sent,n({type:"CHANGE_PASSWORD",data:r}),n(U({title:"Done",message:"Your password has been changed!"})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(U({title:"Error",message:"Sorry, couldn't change your password."},"error"));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(a.username,e)).then((function(){setTimeout((function(){}),5e3),t.go(0)})),n(U({title:"Done",message:"You'r password has been changed!"})))}),o=A.d({oldPassword:A.f().required("Required"),newPassword:A.f().required("Password required").min(10,"Password must be atleast 10 characters long"),newPasswordAgain:A.f().required("Password required").oneOf([A.e("newPassword")],"Passwords must match")});return r.a.createElement("div",{className:"change-password wrap"},r.a.createElement("div",{className:"align "},r.a.createElement(x.d,{validateOnChange:!0,initialValues:{oldPassword:"",newPassword:"",newPasswordAgain:""},validationSchema:o,onSubmit:function(e,a){var t=a.setSubmitting,n=a.resetForm;t(!0),l(e),t(!1),n()}},(function(e){var a=e.values,t=e.errors,n=e.isSubmitting;return r.a.createElement(x.c,{className:"form"},r.a.createElement("label",{htmlFor:"oldPassword"},"Old password"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"oldPassword",value:a.oldPassword,type:"password"})),t.oldPassword?r.a.createElement("div",{className:"form-error-message"},t.oldPassword):null,r.a.createElement("label",{htmlFor:"newPassword"},"New password"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{name:"newPassword",value:a.newPassword,type:"password"})),t.newPassword?r.a.createElement("div",{className:"form-error-message"},t.newPassword):null,r.a.createElement("label",{htmlFor:"newPasswordAgain"},"New password again"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{type:"password",name:"newPasswordAgain",value:a.newPasswordAgain})),t.newPasswordAgain?r.a.createElement("div",{className:"form-error-message"},t.newPasswordAgain):null,r.a.createElement("button",{disabled:n,type:"submit",className:"-submit"},"Change password"),r.a.createElement("pre",{style:{color:"blue"}},JSON.stringify(a,null,2)),r.a.createElement("pre",{style:{color:"blue"}},JSON.stringify(t,null,2)))}))))},Ze=(t(204),function(e){var a=Object(s.b)();if(!e)return null;return console.log({user:e}),r.a.createElement("div",{className:"delete-button-wrapper"},r.a.createElement("div",{className:"delete-button",onClick:function(t){var n;t.preventDefault(),window.confirm("Are you sure you wish to delete you'r account?")&&a((n=e.user.username,function(){var e=Object(m.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log({data:n}),e.next=4,Ae.deleteUser(n);case 4:t=e.sent,a({type:"DELETE_USER",data:t}),a(z()),a(U({title:"Done",message:"You'r account has been deleted."})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error on delete user",{err:e.t0}),a(U({title:"Error",message:"Sorry, something went wrong."},"error"));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a){return e.apply(this,arguments)}}()))}},r.a.createElement("span",null,"Delete")))}),$e=function(e){var a,t=e.login,l=Object(n.useState)("general"),o=Object(v.a)(l,2),c=o[0],s=o[1];if(c)switch(c){case"general":a=r.a.createElement(Qe,{user:t});break;case"delete":a=r.a.createElement(Ze,{user:t});break;default:a=r.a.createElement(Qe,{user:t})}return r.a.createElement("section",{className:"content-wrapper-settings"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"user-settings wrap"},r.a.createElement("div",{className:"align "},r.a.createElement("h2",null,"User Settings"),r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return s("general")}},"General"),r.a.createElement("li",{onClick:function(){return s("delete")}},"Delete account")))),a)))},ea=function(e){var a=e.place,t=Object(s.b)(),n=function(){var e=Object(m.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(qe(a.id,a)).then((function(){console.log("Place update onnistu")}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),l=A.b((function(e){switch(e){case"Closed":return A.f().required();default:return A.f().matches(/\d\d:\d\d/,"The opening hour should be in the format of => ##:## or Closed (if the place is closed for the day.")}})),o=A.d({name:A.f().required("Name is required."),description:A.f().required().min(10,"The description should be atleast 10 characters.").max(350,"The description should be max 350 characters."),openingHours:A.d({mon:A.d({open:l,close:l}),tue:A.d({open:l,close:l}),wed:A.d({open:l,close:l}),thu:A.d({open:l,close:l}),fri:A.d({open:l,close:l}),sat:A.d({open:l,close:l}),sun:A.d({open:l,close:l})}),prices:A.a().of(A.d().shape({name:A.f().min(4,"Name must be atleast 4 chararcters.").required(),onetime:A.c().required().min(0),tentime:A.c().required().min(0),month:A.c().required().min(0)})),address:A.f().min(20).required(),city:A.f().required(),phone:A.f().min(10).required(),email:A.f().email().required(),url:A.f().url().required(),tags:A.a().of(A.f().min(3,"The tag should be atleast 3 characters."))});return console.log("Place in place form",{place:a}),console.log(typeof a.openingHours.mon.open),console.log(typeof a.openingHours.mon.close),r.a.createElement(x.d,{validateOnChange:!0,validationSchema:o,initialValues:a,enableReinitialize:!0,onSubmit:function(e,a){var t=a.setSubmitting;t(!0),console.log({values:e}),n(e),t(!1)}},(function(e){var a,t,n,l,o,c,s,i,u,m,p,d,g,E,f,v,h,b,w,y,N,O,C,H,j,k,S,P,F=e.errors,q=e.values,T=e.isSubmitting,A=e.handleChange,D=e.setFieldValue;return r.a.createElement(x.c,{action:"",className:"account-settings-form form"},r.a.createElement("label",{htmlFor:"Name"},"Name"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"name",value:q.name,type:"input"})),F.name?r.a.createElement("div",{className:"form-error-message"},F.name):null,r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"description",value:q.description,component:"textarea",multiline:"true",rows:3})),F.description?r.a.createElement("div",{className:"form-error-message"},F.description):null,r.a.createElement("label",{htmlFor:"file"},"Image"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("input",{id:"file",name:"file",type:"file",onChange:function(e){D("file",e.currentTarget.files[0])}})),r.a.createElement("h4",null,"Opening hours"),r.a.createElement("label",{htmlFor:"openingHours.mon.open openingHours.mon.close"},"Monday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,value:q.openingHours.mon.open,name:"openingHours.mon.open"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.mon.close",value:q.openingHours.mon.close}),(null===F||void 0===F||null===(a=F.openingHours)||void 0===a||null===(t=a.mon)||void 0===t?void 0:t.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.mon.open):null,(null===F||void 0===F||null===(n=F.openingHours)||void 0===n||null===(l=n.mon)||void 0===l?void 0:l.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.mon.close):null),r.a.createElement("label",{htmlFor:"openingHours.tue.open openingHours.tue.close"},"Tuesday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.tue.open",value:q.openingHours.tue.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.tue.close",value:q.openingHours.tue.close,type:"input"}),(null===F||void 0===F||null===(o=F.openingHours)||void 0===o||null===(c=o.tue)||void 0===c?void 0:c.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.tue.open):null,(null===F||void 0===F||null===(s=F.openingHours)||void 0===s||null===(i=s.tue)||void 0===i?void 0:i.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.tue.close):null),r.a.createElement("label",{htmlFor:"openingHours.wed.close openingHours.wed.close"},"Wednesday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.wed.close",value:q.openingHours.wed.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.wed.close",value:q.openingHours.wed.close,type:"input"}),(null===F||void 0===F||null===(u=F.openingHours)||void 0===u||null===(m=u.wed)||void 0===m?void 0:m.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.wed.open):null,(null===F||void 0===F||null===(p=F.openingHours)||void 0===p||null===(d=p.wed)||void 0===d?void 0:d.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.wed.close):null),r.a.createElement("label",{htmlFor:"openingHours.thu.open openingHours.thu.close"},"Thursday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.thu.open",value:q.openingHours.thu.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.thu.close",value:q.openingHours.thu.close,type:"input"}),(null===F||void 0===F||null===(g=F.openingHours)||void 0===g||null===(E=g.thu)||void 0===E?void 0:E.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.thu.open):null,(null===F||void 0===F||null===(f=F.openingHours)||void 0===f||null===(v=f.thu)||void 0===v?void 0:v.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.thu.close):null),r.a.createElement("label",{htmlFor:"openingHours.fri.open openingHours.fri.close"},"Friday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.fri.open",value:q.openingHours.fri.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.fri.close",value:q.openingHours.fri.close,type:"input"}),(null===F||void 0===F||null===(h=F.openingHours)||void 0===h||null===(b=h.fri)||void 0===b?void 0:b.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.fri.open):null,(null===F||void 0===F||null===(w=F.openingHours)||void 0===w||null===(y=w.fri)||void 0===y?void 0:y.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.fri.close):null),r.a.createElement("label",{htmlFor:"openingHours.sat.open openingHours.sat.close"},"Saturday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.sat.open",value:q.openingHours.sat.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.sat.close",value:q.openingHours.sat.close,type:"input"}),(null===F||void 0===F||null===(N=F.openingHours)||void 0===N||null===(O=N.sat)||void 0===O?void 0:O.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.sat.open):null,(null===F||void 0===F||null===(C=F.openingHours)||void 0===C||null===(H=C.sat)||void 0===H?void 0:H.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.sat.close):null),r.a.createElement("label",{htmlFor:"openingHours.sun.open openingHours.sun.close"},"Sunday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.sun.open",value:q.openingHours.sun.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.sun.close",value:q.openingHours.sun.close,type:"input"}),(null===F||void 0===F||null===(j=F.openingHours)||void 0===j||null===(k=j.sun)||void 0===k?void 0:k.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.sun.open):null,(null===F||void 0===F||null===(S=F.openingHours)||void 0===S||null===(P=S.sun)||void 0===P?void 0:P.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.sun.close):null),r.a.createElement(x.b,{name:"prices"},(function(e){return r.a.createElement("div",null,r.a.createElement("h4",null,"Pricing"),r.a.createElement("button",{type:"button",className:"submit",onClick:function(){return e.push({name:"",onetime:"",tentime:"",month:""})}},"Add"),q.prices.map((function(a,t){var n,l,o,c;return r.a.createElement("div",{key:t},r.a.createElement("label",{htmlFor:"prices[".concat(t,"].name")},"Name"),r.a.createElement("br",null),r.a.createElement(x.a,{onChange:A,name:"prices[".concat(t,"].name")}),r.a.createElement("br",null),(null===F||void 0===F?void 0:F.prices)&&(null===F||void 0===F||null===(n=F.prices[t])||void 0===n?void 0:n.name)?r.a.createElement("div",{className:"form-error-message"},F.prices[t].name):null,r.a.createElement("label",{htmlFor:"prices[".concat(t,"].onetime")},"1x "),r.a.createElement("br",null),r.a.createElement(x.a,{onChange:A,name:"prices[".concat(t,"].onetime"),type:"number"}),r.a.createElement("br",null),(null===F||void 0===F?void 0:F.prices)&&(null===F||void 0===F||null===(l=F.prices[t])||void 0===l?void 0:l.onetime)?r.a.createElement("div",{className:"form-error-message"},F.prices[t].onetime):null,r.a.createElement("label",{htmlFor:"prices[".concat(t,"].tentime")},"10x "),r.a.createElement("br",null),r.a.createElement(x.a,{onChange:A,name:"prices[".concat(t,"].tentime"),type:"number"}),r.a.createElement("br",null),(null===F||void 0===F?void 0:F.prices)&&(null===F||void 0===F||null===(o=F.prices[t])||void 0===o?void 0:o.tentime)?r.a.createElement("div",{className:"form-error-message"},F.prices[t].tentime):null,r.a.createElement("label",{htmlFor:"prices[".concat(t,"].month")},"Month "),r.a.createElement("br",null),r.a.createElement(x.a,{onChange:A,name:"prices[".concat(t,"].month"),type:"number"}),r.a.createElement("br",null),(null===F||void 0===F?void 0:F.prices)&&(null===F||void 0===F||null===(c=F.prices[t])||void 0===c?void 0:c.month)?r.a.createElement("div",{className:"form-error-message"},F.prices[t].month):null,r.a.createElement("button",{type:"button",className:"submit",onClick:function(){return e.remove(t)}},"remove")," ",r.a.createElement("br",null))})))})),r.a.createElement("h4",null,"Info"),r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"address",value:q.address,type:"input"}),F.address?r.a.createElement("div",{className:"form-error-message"},F.address):null),r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"city",value:q.city,type:"input"}),F.city?r.a.createElement("div",{className:"form-error-message"},F.city):null),r.a.createElement("label",{htmlFor:"phone"},"Phone"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"phone",value:q.phone,type:"input"}),F.phone?r.a.createElement("div",{className:"form-error-message"},F.phone):null),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"email",value:q.email,type:"input"}),F.email?r.a.createElement("div",{className:"form-error-message"},F.email):null),r.a.createElement("label",{htmlFor:"url"},"Url"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"url",value:q.url,type:"input"}),F.url?r.a.createElement("div",{className:"form-error-message"},F.url):null),r.a.createElement(x.b,{name:"tags"},(function(e){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"tags"},"Tags"),r.a.createElement("button",{className:"submit",type:"button",onClick:function(){return e.push("")}},"add")," ",r.a.createElement("br",null),q.tags.map((function(a,t){var n="tags.".concat(t),l="errors.tags.".concat(n);"errors.tags[".concat(t,"]");return r.a.createElement("div",{key:t},r.a.createElement(x.a,{onChange:A,name:n}),r.a.createElement("button",{type:"button",className:"submit",onClick:function(){return e.remove(t)}},"remove"),(null===F||void 0===F?void 0:F.tags)&&l?r.a.createElement("div",{className:"form-error-message"},F.tags[t]):null)})))})),r.a.createElement("button",{disabled:T,type:"submit",className:"submit"},"Save"),r.a.createElement("pre",{style:{color:"blue"}},JSON.stringify(q,null,2)),r.a.createElement("pre",{style:{color:"blue"}},JSON.stringify(F,null,2)))}))},aa=function(e){var a=e.place,t=Object(n.useState)(!1),l=Object(v.a)(t,2),o=l[0],c=l[1],i=Object(s.c)((function(e){return e.places}));if(!i)return null;i.sort((function(e){return e.name}));return r.a.createElement("li",null,r.a.createElement("h2",{onClick:function(){return c(!o)}},a.name),o?r.a.createElement(ea,{place:a}):null)},ta=function(e){e.place;var a=Object(s.c)((function(e){return e.places}));if(!a)return null;var t=a.sort((function(e){return e.name}));return r.a.createElement("div",null,r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(aa,{key:e.id,place:e})}))))},na=function(){var e=Object(s.b)(),a=function(){var a=Object(m.a)(u.a.mark((function a(t){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(Fe(t)).then((function(){console.log("Place update onnistu")})),console.log({data:t});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),t=A.b((function(e){switch(e){case"Closed":return A.f().required();default:return A.f().matches(/\d\d:\d\d/,"The opening hour should be in the format of => ##:## or Closed (if the place is closed for the day.")}})),n=A.d({name:A.f().required("Name is required."),description:A.f().required().min(10,"The description should be atleast 10 characters.").max(350,"The description should be max 350 characters."),openingHours:A.d({mon:A.d({open:t,close:t}),tue:A.d({open:t,close:t}),wed:A.d({open:t,close:t}),thu:A.d({open:t,close:t}),fri:A.d({open:t,close:t}),sat:A.d({open:t,close:t}),sun:A.d({open:t,close:t})}),prices:A.a().of(A.d().shape({name:A.f().min(4,"Name must be atleast 4 chararcters.").required(),onetime:A.c().required().min(0),tentime:A.c().required().min(0),month:A.c().required().min(0)})),address:A.f().min(20).required(),city:A.f().required(),phone:A.f().min(10).required(),email:A.f().email().required(),url:A.f().url().required(),tags:A.a().of(A.f().min(3,"The tag should be atleast 3 characters."))});return r.a.createElement(x.d,{validateOnChange:!0,validationSchema:n,initialValues:{name:"",description:"",image:"",openingHours:{mon:{open:"10:00",close:"18:00"},tue:{open:"10:00",close:"18:00"},wed:{open:"10:00",close:"18:00"},thu:{open:"10:00",close:"18:00"},fri:{open:"10:00",close:"18:00"},sat:{open:"10:00",close:"18:00"},sun:{open:"10:00",close:"18:00"}},prices:[{name:"Alle 15v",onetime:0,tentime:0,month:0}],address:"",city:"",phone:"",email:"",url:"",tags:[""]},enableReinitialize:!0,onSubmit:function(e,t){var n=t.setSubmitting;n(!0),console.log({values:e}),a(e),n(!1)}},(function(e){var a,t,n,l,o,c,s,i,u,m,p,d,g,E,f,v,h,b,w,y,N,O,C,H,j,k,S,P,F=e.errors,q=e.values,T=e.isSubmitting,A=e.handleChange,D=e.setFieldValue;return r.a.createElement(x.c,{action:"",className:"account-settings-form form"},r.a.createElement("label",{htmlFor:"Name"},"Name"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"name",value:q.name,type:"input"})),F.name?r.a.createElement("div",{className:"form-error-message"},F.name):null,r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"description",value:q.description,component:"textarea",multiline:"true",rows:3})),F.description?r.a.createElement("div",{className:"form-error-message"},F.description):null,r.a.createElement("label",{htmlFor:"file"},"Image"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("input",{id:"file",name:"file",type:"file",onChange:function(e){D("file",e.currentTarget.files[0])}})),r.a.createElement("h4",null,"Opening hours"),r.a.createElement("label",{htmlFor:"openingHours.mon.open openingHours.mon.close"},"Monday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,value:q.openingHours.mon.open,name:"openingHours.mon.open"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.mon.close",value:q.openingHours.mon.close}),(null===F||void 0===F||null===(a=F.openingHours)||void 0===a||null===(t=a.mon)||void 0===t?void 0:t.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.mon.open):null,(null===F||void 0===F||null===(n=F.openingHours)||void 0===n||null===(l=n.mon)||void 0===l?void 0:l.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.mon.close):null),r.a.createElement("label",{htmlFor:"openingHours.tue.open openingHours.tue.close"},"Tuesday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.tue.open",value:q.openingHours.tue.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.tue.close",value:q.openingHours.tue.close,type:"input"}),(null===F||void 0===F||null===(o=F.openingHours)||void 0===o||null===(c=o.tue)||void 0===c?void 0:c.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.tue.open):null,(null===F||void 0===F||null===(s=F.openingHours)||void 0===s||null===(i=s.tue)||void 0===i?void 0:i.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.tue.close):null),r.a.createElement("label",{htmlFor:"openingHours.wed.close openingHours.wed.close"},"Wednesday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.wed.close",value:q.openingHours.wed.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.wed.close",value:q.openingHours.wed.close,type:"input"}),(null===F||void 0===F||null===(u=F.openingHours)||void 0===u||null===(m=u.wed)||void 0===m?void 0:m.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.wed.open):null,(null===F||void 0===F||null===(p=F.openingHours)||void 0===p||null===(d=p.wed)||void 0===d?void 0:d.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.wed.close):null),r.a.createElement("label",{htmlFor:"openingHours.thu.open openingHours.thu.close"},"Thursday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.thu.open",value:q.openingHours.thu.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.thu.close",value:q.openingHours.thu.close,type:"input"}),(null===F||void 0===F||null===(g=F.openingHours)||void 0===g||null===(E=g.thu)||void 0===E?void 0:E.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.thu.open):null,(null===F||void 0===F||null===(f=F.openingHours)||void 0===f||null===(v=f.thu)||void 0===v?void 0:v.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.thu.close):null),r.a.createElement("label",{htmlFor:"openingHours.fri.open openingHours.fri.close"},"Friday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.fri.open",value:q.openingHours.fri.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.fri.close",value:q.openingHours.fri.close,type:"input"}),(null===F||void 0===F||null===(h=F.openingHours)||void 0===h||null===(b=h.fri)||void 0===b?void 0:b.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.fri.open):null,(null===F||void 0===F||null===(w=F.openingHours)||void 0===w||null===(y=w.fri)||void 0===y?void 0:y.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.fri.close):null),r.a.createElement("label",{htmlFor:"openingHours.sat.open openingHours.sat.close"},"Saturday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.sat.open",value:q.openingHours.sat.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.sat.close",value:q.openingHours.sat.close,type:"input"}),(null===F||void 0===F||null===(N=F.openingHours)||void 0===N||null===(O=N.sat)||void 0===O?void 0:O.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.sat.open):null,(null===F||void 0===F||null===(C=F.openingHours)||void 0===C||null===(H=C.sat)||void 0===H?void 0:H.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.sat.close):null),r.a.createElement("label",{htmlFor:"openingHours.sun.open openingHours.sun.close"},"Sunday"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"openingHours.sun.open",value:q.openingHours.sun.open,type:"input"})," - ",r.a.createElement(x.a,{onChange:A,name:"openingHours.sun.close",value:q.openingHours.sun.close,type:"input"}),(null===F||void 0===F||null===(j=F.openingHours)||void 0===j||null===(k=j.sun)||void 0===k?void 0:k.open)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.sun.open):null,(null===F||void 0===F||null===(S=F.openingHours)||void 0===S||null===(P=S.sun)||void 0===P?void 0:P.close)?r.a.createElement("div",{className:"form-error-message"},F.openingHours.sun.close):null),r.a.createElement(x.b,{name:"prices"},(function(e){return r.a.createElement("div",null,r.a.createElement("h4",null,"Pricing"),r.a.createElement("button",{type:"button",className:"submit",onClick:function(){return e.push({name:"",onetime:"",tentime:"",month:""})}},"Add"),q.prices.map((function(a,t){var n,l,o,c;return r.a.createElement("div",{key:t},r.a.createElement("label",{htmlFor:"prices[".concat(t,"].name")},"Name"),r.a.createElement("br",null),r.a.createElement(x.a,{onChange:A,name:"prices[".concat(t,"].name")}),r.a.createElement("br",null),(null===F||void 0===F?void 0:F.prices)&&(null===F||void 0===F||null===(n=F.prices[t])||void 0===n?void 0:n.name)?r.a.createElement("div",{className:"form-error-message"},F.prices[t].name):null,r.a.createElement("label",{htmlFor:"prices[".concat(t,"].onetime")},"1x "),r.a.createElement("br",null),r.a.createElement(x.a,{onChange:A,name:"prices[".concat(t,"].onetime"),type:"number"}),r.a.createElement("br",null),(null===F||void 0===F?void 0:F.prices)&&(null===F||void 0===F||null===(l=F.prices[t])||void 0===l?void 0:l.onetime)?r.a.createElement("div",{className:"form-error-message"},F.prices[t].onetime):null,r.a.createElement("label",{htmlFor:"prices[".concat(t,"].tentime")},"10x "),r.a.createElement("br",null),r.a.createElement(x.a,{onChange:A,name:"prices[".concat(t,"].tentime"),type:"number"}),r.a.createElement("br",null),(null===F||void 0===F?void 0:F.prices)&&(null===F||void 0===F||null===(o=F.prices[t])||void 0===o?void 0:o.tentime)?r.a.createElement("div",{className:"form-error-message"},F.prices[t].tentime):null,r.a.createElement("label",{htmlFor:"prices[".concat(t,"].month")},"Month "),r.a.createElement("br",null),r.a.createElement(x.a,{onChange:A,name:"prices[".concat(t,"].month"),type:"number"}),r.a.createElement("br",null),(null===F||void 0===F?void 0:F.prices)&&(null===F||void 0===F||null===(c=F.prices[t])||void 0===c?void 0:c.month)?r.a.createElement("div",{className:"form-error-message"},F.prices[t].month):null,r.a.createElement("button",{type:"button",className:"submit",onClick:function(){return e.remove(t)}},"remove")," ",r.a.createElement("br",null))})))})),r.a.createElement("h4",null,"Info"),r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"address",value:q.address,type:"input"}),F.address?r.a.createElement("div",{className:"form-error-message"},F.address):null),r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"city",value:q.city,type:"input"}),F.city?r.a.createElement("div",{className:"form-error-message"},F.city):null),r.a.createElement("label",{htmlFor:"phone"},"Phone"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"phone",value:q.phone,type:"input"}),F.phone?r.a.createElement("div",{className:"form-error-message"},F.phone):null),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"email",value:q.email,type:"input"}),F.email?r.a.createElement("div",{className:"form-error-message"},F.email):null),r.a.createElement("label",{htmlFor:"url"},"Url"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(x.a,{onChange:A,name:"url",value:q.url,type:"input"}),F.url?r.a.createElement("div",{className:"form-error-message"},F.url):null),r.a.createElement(x.b,{name:"tags"},(function(e){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"tags"},"Tags"),r.a.createElement("button",{className:"submit",type:"button",onClick:function(){return e.push("")}},"add")," ",r.a.createElement("br",null),q.tags.map((function(a,t){var n="tags.".concat(t),l="errors.tags.".concat(n);"errors.tags[".concat(t,"]");return r.a.createElement("div",{key:t},r.a.createElement(x.a,{onChange:A,name:n}),r.a.createElement("button",{type:"button",className:"submit",onClick:function(){return e.remove(t)}},"remove"),(null===F||void 0===F?void 0:F.tags)&&l?r.a.createElement("div",{className:"form-error-message"},F.tags[t]):null)})))})),r.a.createElement("button",{disabled:T,type:"submit",className:"submit"},"Save"),r.a.createElement("pre",{style:{color:"blue"}},JSON.stringify(q,null,2)),r.a.createElement("pre",{style:{color:"blue"}},JSON.stringify(F,null,2)))}))},ra=function(e){var a,t=e.login,l=Object(n.useState)("general"),o=Object(v.a)(l,2),c=o[0],s=o[1];if(console.log("helloi"),c)switch(c){case"general":a=r.a.createElement(Qe,{user:t});break;case"changePass":a=r.a.createElement(Xe,{user:t});break;case"places":a=r.a.createElement(ta,null);break;case"addPlace":a=r.a.createElement(na,null);break;case"delete":a=r.a.createElement(Ze,{user:t});break;default:a=r.a.createElement(Qe,{user:t})}return r.a.createElement("section",{className:"content-wrapper-settings"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"user-settings wrap"},r.a.createElement("div",{className:"align "},r.a.createElement("h2",null,"User Settings"),r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return s("general")}},"General"),r.a.createElement("li",{onClick:function(){return s("changePass")}},"Change password"),r.a.createElement("li",{onClick:function(){return s("places")}},"Place control"),r.a.createElement("li",{onClick:function(){return s("addPlace")}},"Add a place"),r.a.createElement("li",{onClick:function(){return s("delete")}},"Delete account")))),a)))},la=function(e){var a,t=e.login,l=Object(n.useState)("general"),o=Object(v.a)(l,2),c=o[0],s=o[1];if(c)switch(c){case"general":a=r.a.createElement(Qe,{user:t});break;case"changePass":a=r.a.createElement(Xe,{user:t});break;case"delete":a=r.a.createElement(Ze,{user:t});break;default:a=r.a.createElement(Qe,{user:t})}return r.a.createElement("section",{className:"content-wrapper-settings"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"user-settings wrap"},r.a.createElement("div",{className:"align "},r.a.createElement("h2",null,"User Settings"),r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return s("general")}},"General"),r.a.createElement("li",{onClick:function(){return s("changePass")}},"Change password"),r.a.createElement("li",{onClick:function(){return s("delete")}},"Delete account")))),a)))},oa=function(e){var a,t=Object(s.b)(),l=Object(p.f)(),o=Object(n.useState)(!1),c=Object(v.a)(o,2),i=(c[0],c[1],Object(p.g)("/:username/settings"),e.location.user),u=Object(s.c)((function(e){return e.session}));i||l.push("/");if(u)switch(console.log("tyyppi",u.type),u.type){case"AdminUser":a=r.a.createElement(ra,{login:u});break;case"ThirdPartyUser":a=r.a.createElement($e,{login:u});break;default:a=r.a.createElement(la,{login:u})}console.log({information:a});return r.a.createElement("div",null,r.a.createElement(de,null),u?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"hero-wrapper"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"hero-content"},r.a.createElement("img",{onError:function(e){e.target.src="".concat(u.avatar)},src:"../".concat(u.avatar),alt:""}),r.a.createElement("input",{type:"file",onChange:function(e){e.preventDefault(),e.target.files[0]&&t(De(e.target.files[0]))}}),r.a.createElement("div",{className:"user-text"},r.a.createElement("h2",null,u.name))))),a):r.a.createElement("h1",{style:{textAlign:"center"}},"You are not logged in. You can go log in by pressing the Login button in the NavBar"),r.a.createElement(M,null))},ca=(t(126),function(e){var a=Object(n.useState)(0),t=Object(v.a)(a,2),l=t[0],o=t[1],c=Object(n.useState)(!1),i=Object(v.a)(c,2),u=i[0],m=i[1],p=Object(n.useState)(null),d=Object(v.a)(p,2),g=d[0],E=d[1],f=Object(s.b)();Object(n.useEffect)((function(){100===l&&w()}),[l]),Object(n.useEffect)((function(){h()}),[]);var h=function(){var e=setInterval((function(){o((function(a){return a<100?a+1:(clearInterval(e),a)}))}),20);E(e)},b=function(){clearInterval(g)},w=function(){b(),m(!0),setTimeout((function(){var a;f((a=e.note.id,function(e){e({type:"CLEAR_NOTIFICATION",id:a})}))}),1e3*e.note.time)};return r.a.createElement("div",{onMouseEnter:b,onMouseLeave:h,className:"notification ".concat(e.note.type,"  ").concat(u?"exit":"")},e.note.title?r.a.createElement("h3",null,e.note.title):null,r.a.createElement("p",null," ",e.note.message," "),r.a.createElement("div",{className:"bar",style:{width:"".concat(l,"%")}}))}),sa=function(){var e=Object(s.c)((function(e){return e.notification}));return r.a.createElement("div",{className:"notification-wrapper"},e.map((function(e){return r.a.createElement(ca,{key:e.id,note:e})})))},ia=function(){var e=Object(s.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(m.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.getAll();case 3:t=e.sent,a({type:"INIT_PLACES",data:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a(U({title:"Error",message:"There was an error loading the database. Please try again later."},"error")),console.error("Error on initplaces: ",e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}())}),[e]),Object(n.useEffect)((function(){e(Y())}),[]),Object(n.useEffect)((function(){try{return Le.onAuthStateChanged(function(){var a=Object(m.a)(u.a.mark((function a(t){var n;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=5;break}return a.next=3,t.getIdToken();case 3:(n=a.sent)&&e(W(n));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}catch(a){console.log("error is",a.message)}}),[]),r.a.createElement("div",null,r.a.createElement(sa,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:ge}),r.a.createElement(p.a,{exact:!0,path:"/gym/:place_name",component:Se}),r.a.createElement(p.a,{path:"/login",component:ae}),r.a.createElement(p.a,{exact:!0,path:"/register",component:We}),r.a.createElement(p.a,{exact:!0,path:"/reset_password",component:ze}),r.a.createElement(p.a,{exact:!0,path:"/forgot",component:Ke}),r.a.createElement(p.a,{exact:!0,path:"/:username/settings",component:oa})))},ua=t(145),ma=t(56),pa=t(146),da=Object(ma.combineReducers)({places:Te,comments:fe,session:B,notification:R,user:Ue}),ga=Object(ma.createStore)(da,Object(ua.composeWithDevTools)(Object(ma.applyMiddleware)(pa.a)));o.a.render(r.a.createElement(c.a,null,r.a.createElement(s.a,{store:ga},r.a.createElement(ia,null))),document.getElementById("root"))},86:function(e,a,t){e.exports=t.p+"static/media/logo-white.53c9c881.svg"},87:function(e,a,t){e.exports=t.p+"static/media/logo-white-header.8277cea1.svg"}},[[149,1,2]]]);
//# sourceMappingURL=main.497e8960.chunk.js.map